<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Gerenciador - Lanchonete</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root { --primary: #FF6B6B; --secondary: #4ECDC4; --dark: #2D3436; --light: #F7F9FC; }

        body { font-family: 'Poppins', sans-serif; background-color: var(--light); margin: 0; padding: 0; color: var(--dark); }

        /* MENU SUPERIOR */
        nav { background: white; padding: 15px 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; }
        .logo { font-weight: 600; font-size: 1.5em; color: var(--primary); }
        .menu-links a { text-decoration: none; color: #666; margin-left: 20px; font-weight: 500; transition: 0.3s; }
        .menu-links a:hover, .menu-links a.active { color: var(--primary); }

        .container { max-width: 900px; margin: 40px auto; padding: 0 20px; }

        /* CARD DE CADASTRO */
        .card-form { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); display: flex; gap: 15px; align-items: flex-end; flex-wrap: wrap; }
        .form-group { flex: 1; min-width: 200px; }
        .form-group label { display: block; margin-bottom: 5px; font-size: 0.9em; color: #888; }
        input { width: 100%; padding: 12px; border: 2px solid #eee; border-radius: 8px; font-family: inherit; box-sizing: border-box; transition: 0.3s; }
        input:focus { border-color: var(--primary); outline: none; }

        button.btn-save { background: var(--primary); color: white; border: none; padding: 12px 30px; border-radius: 8px; cursor: pointer; font-weight: 600; height: 46px; transition: 0.3s; }
        button.btn-save:hover { background: #ee5253; transform: translateY(-2px); }

        /* LISTA DE PRODUTOS */
        h2 { margin-top: 40px; border-left: 5px solid var(--primary); padding-left: 15px; }

        .lista-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }

        .card-produto { background: white; padding: 20px; border-radius: 12px; border-left: 4px solid var(--secondary); box-shadow: 0 4px 10px rgba(0,0,0,0.03); transition: 0.3s; }
        .card-produto:hover { transform: translateY(-3px); box-shadow: 0 8px 15px rgba(0,0,0,0.1); }
        .prod-nome { font-weight: 600; font-size: 1.1em; margin-bottom: 5px; }
        .prod-desc { font-size: 0.85em; color: #888; margin-bottom: 10px; min-height: 40px; }
        .prod-price { font-weight: bold; color: var(--primary); font-size: 1.2em; text-align: right; }
    </style>
</head>
<body>

<nav>
    <div class="logo"><i class="fas fa-hamburger"></i> Lanchonete App</div>
    <div class="menu-links">
        <a href="index.html" class="active">Produtos</a>
        <a href="comandas.html">Mesas & Comandas</a>
    </div>
</nav>

<div class="container">
    <div class="card-form">
        <div class="form-group">
            <label>Nome do Produto</label>
            <input type="text" id="nome" placeholder="Ex: X-Burger">
        </div>
        <div class="form-group">
            <label>Preço (R$)</label>
            <input type="number" id="preco" placeholder="0.00">
        </div>
        <div class="form-group">
            <label>Descrição</label>
            <input type="text" id="descricao" placeholder="Ingredientes...">
        </div>
        <button class="btn-save" onclick="cadastrarProduto()"><i class="fas fa-plus"></i> Salvar</button>
    </div>

    <h2>Cardápio Cadastrado</h2>
    <div id="lista-produtos" class="lista-grid"></div>
</div>

<script>
    async function carregarProdutos() {
        const resposta = await fetch('http://localhost:8080/produtos');
        const produtos = await resposta.json();
        const divLista = document.getElementById('lista-produtos');
        divLista.innerHTML = '';

        produtos.forEach(produto => {
            const item = document.createElement('div');
            item.className = 'card-produto';
            item.innerHTML = `
                <div class="prod-nome">${produto.nome}</div>
                <div class="prod-desc">${produto.descricao || 'Sem descrição'}</div>
                <div class="prod-price">R$ ${produto.preco.toFixed(2)}</div>
            `;
            divLista.appendChild(item);
        });
    }

    async function cadastrarProduto() {
        const nomeInput = document.getElementById('nome').value;
        const precoInput = document.getElementById('preco').value;
        const descricaoInput = document.getElementById('descricao').value;

        if (!nomeInput || !precoInput) return alert("Preencha nome e preço!");

        await fetch('http://localhost:8080/produtos', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ nome: nomeInput, preco: parseFloat(precoInput), descricao: descricaoInput })
        });

        document.getElementById('nome').value = '';
        document.getElementById('preco').value = '';
        document.getElementById('descricao').value = '';
        carregarProdutos();
    }
    carregarProdutos();
</script>
</body>
</html>